configurations {
  foo
}

def detached = configurations.detachedConfiguration()
detached.dependencies.add(dependencies.project(path: project.path, configuration: 'foo'))

task foo {
  doLast {
    detached.resolve()
  }
}
